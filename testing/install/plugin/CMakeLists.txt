#------------------------------------------------------------------------------#
# Distributed under the OSI-approved Apache License, Version 2.0.  See
# accompanying file Copyright.txt for details.
#------------------------------------------------------------------------------#

cmake_minimum_required(VERSION 3.6)
project(adios_plugin_test CXX)
enable_testing()

find_package(adios2 REQUIRED)

# add write test
add_executable(adios_plugin_write_test
  examplePluginEngine_write.cpp
  ExampleWritePlugin.cpp
)
target_link_libraries(adios_plugin_write_test adios2::cxx11 adios2_core)
add_test(NAME adios_plugin_write_test COMMAND adios_plugin_write_test)

# add read test
add_executable(adios_plugin_read_test
  examplePluginEngine_read.cpp
  ExampleReadPlugin.cpp
)
target_link_libraries(adios_plugin_read_test adios2::cxx11 adios2_core)
add_test(NAME adios_plugin_read_test COMMAND adios_plugin_read_test)
set_tests_properties(adios_plugin_read_test PROPERTIES
    DEPENDS adios_plugin_write_test)
